<?xml version="1.0" encoding="UTF-8"?>
<database name="propel" defaultIdMethod="native" package="plugins.stSearchPlugin.lib.model" noXsd="true">

  <table name="st_searched_words" phpName="SearchedWords">
    <column name="created_at" type="timestamp" />
    <column name="updated_at" type="timestamp" />
    <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" />
    <column name="word" type="VARCHAR" size="255" required="true" />
    <column name="results" type="INTEGER" required="true" default="0" />
    <column name="searched" type="INTEGER" required="true" default="0" />
    <column name="swap" type="VARCHAR" size="255" />
    <column name="url" type="VARCHAR" size="255" />
    <index name="searched_words_searched">
      <index-column name="word" />
    </index>
    <index name="searched_words_swap">
      <index-column name="swap" />
    </index>
  </table>

  <table name="st_product_search_index" phpName="ProductSearchIndex">
    <column name="created_at" type="timestamp" />
    <column name="updated_at" type="timestamp" />
    <column name="id" type="INTEGER" primaryKey="true" required="true" />
    <foreign-key foreignTable="st_product" onDelete="restrict">
      <reference local="id" foreign="id" />
    </foreign-key>
    <column name="culture" type="VARCHAR" size="7" primaryKey="true" required="true" />
    <column name="name" type="LONGVARCHAR" />
    <column name="simple_search" type="LONGVARCHAR" />
    <column name="advanced_search" type="LONGVARCHAR" />
    <column name="advanced_name" type="LONGVARCHAR" />
  </table>

  <table name="st_product_search_tag" phpName="ProductSearchTag">
    <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" />
    <column name="tag" type="VARCHAR" size="64" required="true" />
    <unique name="unique_tag">
      <unique-column name="tag" />
    </unique>
  </table>

  <table name="st_product_has_product_search_tag" phpName="ProductHasProductSearchTag">
    <column name="product_id" type="INTEGER" primaryKey="true" required="true" />
    <foreign-key foreignTable="st_product" onDelete="restrict">
      <reference local="product_id" foreign="id" />
    </foreign-key>
    <column name="product_search_tag_id" type="INTEGER" primaryKey="true" required="true" />
    <foreign-key foreignTable="st_product_search_tag" onDelete="restrict">
      <reference local="product_search_tag_id" foreign="id" />
    </foreign-key>
    <column name="culture" type="VARCHAR" size="7" primaryKey="true" required="true" />
    <column name="tag_value" type="INTEGER" required="true" default="1" />
  </table>

  <table name="st_search_link" phpName="SearchLink" isI18n="1" i18nTable="st_search_link_i18n">
    <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" />
    <column name="opt_title" type="VARCHAR" size="255" />
    <column name="opt_description" type="LONGVARCHAR" />
    <column name="opt_url" type="VARCHAR" size="255" />
    <column name="opt_meta_title" type="VARCHAR" size="255" />
    <column name="opt_meta_keywords" type="VARCHAR" size="255" />
    <column name="opt_meta_description" type="VARCHAR" size="160" />
    <column name="opt_search_keywords" type="VARCHAR" size="100" />
  </table>

  <table name="st_search_link_i18n" phpName="SearchLinkI18n">
    <column name="id" type="integer" required="true" primaryKey="true" />
    <foreign-key foreignTable="st_search_link" onDelete="cascade">
      <reference local="id" foreign="id" />
    </foreign-key>
    <column name="culture" isCulture="true" primaryKey="true" type="VARCHAR" size="7" />
    <column name="title" type="VARCHAR" size="255" />
    <column name="description" type="LONGVARCHAR" />
    <column name="url" type="VARCHAR" size="255" />
    <column name="meta_title" type="VARCHAR" size="255" />
    <column name="meta_keywords" type="VARCHAR" size="255" />
    <column name="meta_description" type="VARCHAR" size="160" />
    <column name="search_keywords" type="VARCHAR" size="100" />
    <unique name="url_idx">
      <unique-column name="url" />
      <unique-column name="culture" />
    </unique>
  </table>

</database>
