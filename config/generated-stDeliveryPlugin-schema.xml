<?xml version="1.0" encoding="UTF-8"?>
<database name="propel" defaultIdMethod="native" package="plugins.stDeliveryPlugin.lib.model" noXsd="true">

  <table name="st_delivery" phpName="Delivery" isI18N="true" i18nTable="st_delivery_i18n">
    <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" />
    <column name="countries_area_id" type="INTEGER" />
    <foreign-key foreignTable="st_countries_area" onDelete="setnull">
      <reference local="countries_area_id" foreign="id" />
    </foreign-key>
    <column name="tax_id" type="INTEGER" />
    <foreign-key foreignTable="st_tax" onDelete="setnull">
      <reference local="tax_id" foreign="id" />
    </foreign-key>
    <column name="type_id" type="INTEGER" />
    <foreign-key foreignTable="st_delivery_type" onDelete="setnull">
      <reference local="type_id" foreign="id" />
    </foreign-key>
    <column name="free_delivery" type="DECIMAL" size="10" scale="2" default="0" />
    <column name="active" type="BOOLEAN" />
    <column name="allow_in_selected_products" type="BOOLEAN" required="true" default="0" />
    <column name="default_cost" type="DECIMAL" size="10" scale="2" default="0" />
    <column name="default_cost_brutto" type="DECIMAL" size="10" scale="2" />
    <column name="width" type="INTEGER" default="0" required="true" />
    <column name="height" type="INTEGER" default="0" required="true" />
    <column name="depth" type="INTEGER" default="0" required="true" />
    <column name="volume" type="INTEGER" default="0" required="true" />
    <column name="is_system_default" type="BOOLEAN" default="0" />
    <column name="opt_name" type="VARCHAR" size="255" change_column="name" />
    <column name="opt_description" type="LONGVARCHAR" change_column="description" />
    <column name="is_default" type="BOOLEAN" default="0" />
    <column name="section_cost_type" type="VARCHAR" size="32" />
    <column name="max_order_weight" type="DECIMAL" size="6" scale="2" default="0" />
    <column name="max_order_amount" type="DECIMAL" size="10" scale="2" default="0" />
    <column name="max_order_quantity" type="INTEGER" default="0" />
    <column name="min_order_weight" type="DECIMAL" size="6" scale="2" default="0" />
    <column name="min_order_amount" type="DECIMAL" size="10" scale="2" default="0" />
    <column name="min_order_quantity" type="INTEGER" default="0" />
    <column name="position" type="INTEGER" default="0" />
    <column name="params" type="VARCHAR" size="4096" phpType="array" />
    <column name="paczkomaty_type" type="VARCHAR" size="5" />
    <column name="paczkomaty_size" type="VARCHAR" size="5" />
    <index name="delivery_active">
      <index-column name="max_order_amount" />
      <index-column name="max_order_quantity" />
      <index-column name="max_order_weight" />
      <index-column name="active" />
    </index>
    <index name="type_id_idx">
      <index-column name="type_id" />
    </index>
  </table>

  <table name="st_delivery_type" phpName="DeliveryType">
    <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" />
    <column name="name" type="VARCHAR" size="128" required="true" />
    <column name="type" type="VARCHAR" size="16" />
  </table>

  <table name="st_delivery_sections" phpName="DeliverySections">
    <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" />
    <column name="attribute_field_id" type="INTEGER" />
    <foreign-key foreignTable="st_attribute_field" onDelete="cascade">
      <reference local="attribute_field_id" foreign="id" />
    </foreign-key>
    <column name="delivery_id" type="INTEGER" required="true" />
    <foreign-key foreignTable="st_delivery" onDelete="cascade">
      <reference local="delivery_id" foreign="id" />
    </foreign-key>
    <column name="value_from" type="DECIMAL" size="10" scale="2" default="0" />
    <column name="amount" type="DECIMAL" size="10" scale="2" default="0" />
    <column name="amount_brutto" type="DECIMAL" size="10" scale="2" />
  </table>

  <table name="st_delivery_has_payment_type" phpName="DeliveryHasPaymentType">
    <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" />
    <column name="payment_type_id" type="INTEGER" required="true" />
    <foreign-key foreignTable="st_payment_type" onDelete="cascade">
      <reference local="payment_type_id" foreign="id" />
    </foreign-key>
    <column name="delivery_id" type="INTEGER" required="true" />
    <foreign-key foreignTable="st_delivery" onDelete="cascade">
      <reference local="delivery_id" foreign="id" />
    </foreign-key>
    <column name="is_active" type="BOOLEAN" default="0" />
    <column name="is_default" type="BOOLEAN" default="0" />
    <column name="cost" type="DECIMAL" size="10" scale="2" default="0" />
    <column name="cost_brutto" type="DECIMAL" size="10" scale="2" />
    <column name="free_from" type="DECIMAL" size="10" scale="2" default="0" />
    <column name="cost_type" type="CHAR" default="P" required="true" />
    <column name="courier_cost" type="DECIMAL" size="10" scale="2" />
  </table>

  <table name="st_delivery_i18n" phpName="DeliveryI18n">
    <column name="id" type="integer" required="true" primaryKey="true" />
    <foreign-key foreignTable="st_delivery" onDelete="cascade">
      <reference local="id" foreign="id" />
    </foreign-key>
    <column name="culture" isCulture="true" primaryKey="true" type="VARCHAR" size="7" />
    <column name="name" type="VARCHAR" size="255" />
    <column name="description" type="LONGVARCHAR" />
  </table>

</database>
