<?xml version="1.0" encoding="UTF-8"?>
<database name="propel" package="plugins.sfGuardPlugin.lib.model" defaultIdMethod="native" noXsd="true">

  <table name="sf_guard_group" phpName="sfGuardGroup">
    <column name="id" type="integer" required="true" primaryKey="true" autoincrement="true" />
    <column name="name" type="varchar" size="48" required="true" />
    <unique name="sf_guard_group_name_unique">
      <unique-column name="name" />
    </unique>
    <column name="description" type="varchar" size="48" />
  </table>

  <table name="sf_guard_permission" phpName="sfGuardPermission">
    <column name="id" type="integer" required="true" primaryKey="true" autoincrement="true" />
    <column name="name" type="varchar" size="48" required="true" />
    <unique name="sf_guard_permission_name_unique">
      <unique-column name="name" />
    </unique>
    <column name="description" type="varchar" size="48" />
  </table>

  <table name="sf_guard_group_permission" phpName="sfGuardGroupPermission">
    <column name="group_id" type="integer" primaryKey="true" required="true" />
    <foreign-key foreignTable="sf_guard_group" onDelete="cascade">
      <reference local="group_id" foreign="id" />
    </foreign-key>
    <column name="permission_id" type="integer" primaryKey="true" required="true" />
    <foreign-key foreignTable="sf_guard_permission" onDelete="cascade">
      <reference local="permission_id" foreign="id" />
    </foreign-key>
  </table>

  <table name="sf_guard_user" phpName="sfGuardUser">
    <column name="id" type="integer" required="true" primaryKey="true" autoincrement="true" />
    <column name="username" type="varchar" size="128" required="true" />
    <unique name="sf_guard_user_username_unique">
      <unique-column name="username" />
    </unique>
    <column name="algorithm" type="varchar" size="128" required="true" default="sha1" />
    <column name="salt" type="varchar" size="128" required="true" default="" />
    <column name="password" type="varchar" size="128" required="true" default="" />
    <column name="created_at" type="timestamp" />
    <column name="last_login" type="timestamp" />
    <column name="is_active" type="boolean" required="true" default="1" />
    <column name="is_super_admin" type="boolean" required="true" default="0" />
    <column name="is_confirm" type="boolean" required="false" default="1" />
    <column name="is_admin_confirm" type="boolean" required="false" default="0" />
    <column name="hash_code" type="varchar" size="128" required="false" />
    <column name="language" type="varchar" size="10" required="false" />
    <column name="external_account" type="varchar" size="128" required="false" />
    <column name="points" type="INTEGER" default="0" />
    <column name="points_available" type="BOOLEAN" default="1" />
    <column name="points_release" type="BOOLEAN" default="0" />
    <column name="opt_allegro_user_id" type="INTEGER" />
    <column name="wholesale" type="CHAR" size="1" default="0" required="true" />
    <index name="opt_allegro_user_id_idx">
      <index-column name="opt_allegro_user_id" />
    </index>
  </table>

  <table name="sf_guard_user_permission" phpName="sfGuardUserPermission">
    <column name="user_id" type="integer" primaryKey="true" required="true" />
    <foreign-key foreignTable="sf_guard_user" onDelete="cascade">
      <reference local="user_id" foreign="id" />
    </foreign-key>
    <column name="permission_id" type="integer" primaryKey="true" required="true" />
    <foreign-key foreignTable="sf_guard_permission" onDelete="cascade">
      <reference local="permission_id" foreign="id" />
    </foreign-key>
  </table>

  <table name="sf_guard_user_group" phpName="sfGuardUserGroup">
    <column name="user_id" type="integer" primaryKey="true" required="true" />
    <foreign-key foreignTable="sf_guard_user" onDelete="cascade">
      <reference local="user_id" foreign="id" />
    </foreign-key>
    <column name="group_id" type="integer" primaryKey="true" required="true" />
    <foreign-key foreignTable="sf_guard_group" onDelete="cascade">
      <reference local="group_id" foreign="id" />
    </foreign-key>
  </table>

  <table name="sf_guard_remember_key" phpName="sfGuardRememberKey">
    <column name="user_id" type="integer" primaryKey="true" required="true" />
    <foreign-key foreignTable="sf_guard_user" onDelete="cascade">
      <reference local="user_id" foreign="id" />
    </foreign-key>
    <column name="remember_key" type="varchar" size="32" />
    <column name="ip_address" type="varchar" size="50" primaryKey="true" />
    <column name="created_at" type="timestamp" />
  </table>

  <table name="sf_guard_user_module_permission" phpName="sfGuardUserModulePermission">
    <column name="id" type="integer" primaryKey="true" required="true" />
    <foreign-key foreignTable="sf_guard_user" onDelete="cascade">
      <reference local="id" foreign="id" />
    </foreign-key>
    <column name="permissions" type="LONGVARCHAR" phpType="array" />
  </table>

  <table name="sf_guard_group_module_permission" phpName="sfGuardGroupModulePermission">
    <column name="id" type="integer" primaryKey="true" required="true" />
    <foreign-key foreignTable="sf_guard_group" onDelete="cascade">
      <reference local="id" foreign="id" />
    </foreign-key>
    <column name="permissions" type="LONGVARCHAR" phpType="array" />
  </table>

</database>
