<?xml version="1.0" encoding="UTF-8"?>
<database name="propel" defaultIdMethod="native" package="lib.model" noXsd="true">

  <table name="st_order" phpName="Order">
    <column name="created_at" type="timestamp" />
    <column name="updated_at" type="timestamp" />
    <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" />
    <column name="order_delivery_id" type="INTEGER" />
    <foreign-key foreignTable="st_order_delivery" onDelete="setnull">
      <reference local="order_delivery_id" foreign="id" />
    </foreign-key>
    <column name="sf_guard_user_id" type="INTEGER" />
    <foreign-key foreignTable="sf_guard_user" onDelete="setnull">
      <reference local="sf_guard_user_id" foreign="id" />
    </foreign-key>
    <column name="order_user_data_delivery_id" type="INTEGER" />
    <foreign-key foreignTable="st_order_user_data_delivery" onDelete="setnull">
      <reference local="order_user_data_delivery_id" foreign="id" />
    </foreign-key>
    <column name="order_user_data_billing_id" type="INTEGER" />
    <foreign-key foreignTable="st_order_user_data_billing" onDelete="setnull">
      <reference local="order_user_data_billing_id" foreign="id" />
    </foreign-key>
    <column name="order_currency_id" type="INTEGER" required="true" />
    <foreign-key foreignTable="st_order_currency" onDelete="restrict">
      <reference local="order_currency_id" foreign="id" />
    </foreign-key>
    <column name="order_status_id" type="INTEGER" required="true" />
    <foreign-key foreignTable="st_order_status" onDelete="restrict">
      <reference local="order_status_id" foreign="id" />
    </foreign-key>
    <column name="discount_coupon_code_id" type="INTEGER" />
    <foreign-key foreignTable="st_discount_coupon_code" onDelete="setnull">
      <reference local="discount_coupon_code_id" foreign="id" />
    </foreign-key>
    <column name="discount_id" type="INTEGER" />
    <foreign-key foreignTable="st_discount" onDelete="setnull">
      <reference local="discount_id" foreign="id" />
    </foreign-key>
    <column name="order_discount" type="VARCHAR" phpType="array" size="255" />
    <column name="hash_code" type="CHAR" size="32" />
    <column name="payment_security_hash" type="CHAR" size="40" />
    <column name="session_hash" type="CHAR" size="32" />
    <column name="is_confirmed" type="BOOLEAN" default="" />
    <column name="is_marked_as_read" type="BOOLEAN" default="1" />
    <column name="number" type="VARCHAR" size="64" />
    <column name="description" type="LONGVARCHAR" />
    <column name="order_type" type="VARCHAR" size="20" />
    <column name="merchant_notes" type="LONGVARCHAR" />
    <column name="client_culture" type="VARCHAR" size="7" />
    <column name="host" type="VARCHAR" size="255" />
    <column name="opt_total_amount" type="DECIMAL" size="10" scale="2" required="true" default="0" />
    <column name="opt_is_payed" type="BOOLEAN" />
    <column name="opt_client_name" type="VARCHAR" size="255" />
    <column name="opt_client_email" type="VARCHAR" size="128" />
    <column name="opt_client_company" type="VARCHAR" size="128" />
    <column name="remote_address" type="VARCHAR" size="45" />
    <column name="is_codes_sent" type="INTEGER" />
    <column name="opt_allegro_nick" type="VARCHAR" size="255" />
    <column name="opt_allegro_checkout_form_id" type="CHAR" size="36" />
    <unique name="st_order_opt_allegro_checkout_form_id_unique">
      <unique-column name="opt_allegro_checkout_form_id" />
    </unique>
    <column name="show_opinion" type="INTEGER" />
    <column name="change_stock_on" type="VARCHAR" size="45" />
    <column name="partner_id" type="INTEGER" required="false" />
    <foreign-key foreignTable="st_partner" onDelete="setnull">
      <reference local="partner_id" foreign="id" />
    </foreign-key>
    <column name="provision_value" type="FLOAT" />
    <column name="provision_payed" type="BOOLEAN" default="0" />
    <index name="order_number">
      <index-column name="number" />
    </index>
    <index name="discount_coupon_code_FI">
      <index-column name="discount_coupon_code_id" />
    </index>
    <index name="discount_FI">
      <index-column name="discount_id" />
    </index>
  </table>

  <table name="st_order_status" phpName="OrderStatus" isI18N="true" i18nTable="st_order_status_i18n">
    <column name="created_at" type="timestamp" />
    <column name="updated_at" type="timestamp" />
    <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" />
    <column name="coupon_code_id" type="INTEGER" />
    <foreign-key foreignTable="st_order_status_coupon_code" onDelete="cascade">
      <reference local="coupon_code_id" foreign="id" />
    </foreign-key>
    <column name="opt_name" type="VARCHAR" size="128" change_column="name" />
    <column name="opt_description" type="LONGVARCHAR" />
    <column name="type" type="VARCHAR" size="16" />
    <column name="is_default" type="BOOLEAN" default="" />
    <column name="is_system_default" type="BOOLEAN" default="" />
    <column name="has_mail_notification" type="BOOLEAN" default="1" />
    <column name="has_coupon_code" type="BOOLEAN" required="true" default="" />
    <column name="has_invoice_proforma" type="BOOLEAN" default="" />
    <column name="has_invoice" type="BOOLEAN" default="" />
    <column name="depository_action" type="CHAR" size="1" />
  </table>

  <table name="st_order_currency" phpName="OrderCurrency">
    <column name="created_at" type="timestamp" />
    <column name="updated_at" type="timestamp" />
    <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" />
    <column name="name" type="VARCHAR" size="255" />
    <column name="exchange" type="DECIMAL" size="6" scale="4" />
    <column name="shortcut" type="VARCHAR" size="20" />
    <column name="front_symbol" type="VARCHAR" size="20" />
    <column name="back_symbol" type="VARCHAR" size="20" />
  </table>

  <table name="st_order_product" phpName="OrderProduct">
    <column name="created_at" type="timestamp" />
    <column name="updated_at" type="timestamp" />
    <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" />
    <column name="order_id" type="INTEGER" required="true" />
    <foreign-key foreignTable="st_order" onDelete="cascade">
      <reference local="order_id" foreign="id" />
    </foreign-key>
    <column name="product_id" type="INTEGER" />
    <foreign-key foreignTable="st_product" onDelete="setnull">
      <reference local="product_id" foreign="id" />
    </foreign-key>
    <column name="tax_id" type="INTEGER" />
    <foreign-key foreignTable="st_tax" onDelete="setnull">
      <reference local="tax_id" foreign="id" />
    </foreign-key>
    <column name="quantity" type="DECIMAL" size="8" scale="2" required="true" />
    <column name="code" type="VARCHAR" size="255" />
    <column name="name" type="VARCHAR" size="1024" />
    <column name="image" type="VARCHAR" size="255" />
    <column name="price" type="DECIMAL" size="10" scale="2" />
    <column name="price_brutto" type="DECIMAL" size="10" scale="2" />
    <column name="custom_price" type="DECIMAL" size="10" scale="2" />
    <column name="custom_price_brutto" type="DECIMAL" size="10" scale="2" />
    <column name="vat" type="DECIMAL" size="5" scale="2" />
    <column name="points_value" type="INTEGER" default="0" />
    <column name="points_earn" type="INTEGER" default="0" />
    <column name="product_for_points" type="BOOLEAN" default="0" required="true" />
    <column name="version" type="INTEGER" />
    <column name="is_set" type="BOOLEAN" default="" required="true" />
    <column name="is_gift" type="BOOLEAN" default="" required="true" />
    <column name="send_review" type="timestamp" />
    <column name="price_modifiers" type="LONGVARCHAR" phpType="array" />
    <column name="discount" type="VARCHAR" size="1024" phpType="array" />
    <column name="currency" type="VARCHAR" size="1024" phpType="array" />
    <column name="wholesale" type="VARCHAR" size="1024" phpType="array" />
    <column name="online_code" type="VARCHAR" size="255" />
    <column name="allegro_auction_id" type="BIGINT" />
    <column name="options" type="VARCHAR" size="255" />
  </table>

  <table name="st_order_product_has_set" phpName="OrderProductHasSet">
    <column name="order_product_id" type="INTEGER" primaryKey="true" />
    <foreign-key foreignTable="st_order_product" onDelete="cascade">
      <reference local="order_product_id" foreign="id" />
    </foreign-key>
    <column name="product_id" type="INTEGER" primaryKey="true" />
    <foreign-key foreignTable="st_product" onDelete="restrict">
      <reference local="product_id" foreign="id" />
    </foreign-key>
    <column name="code" type="VARCHAR" size="255" />
    <column name="name" type="VARCHAR" size="255" />
    <column name="price_netto" type="DECIMAL" size="10" scale="2" />
    <column name="price_brutto" type="DECIMAL" size="10" scale="2" />
  </table>

  <table name="st_order_user_data_billing" phpName="OrderUserDataBilling">
    <column name="created_at" type="timestamp" />
    <column name="updated_at" type="timestamp" />
    <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" />
    <column name="countries_id" type="INTEGER" />
    <foreign-key foreignTable="st_countries" onDelete="setnull">
      <reference local="countries_id" foreign="id" />
    </foreign-key>
    <column name="has_valid_vat_eu" type="BOOLEAN" default="" required="true" />
    <column name="country" type="VARCHAR" size="255" />
    <column name="full_name" type="VARCHAR" size="255" />
    <column name="address" type="VARCHAR" size="255" />
    <column name="address_more" type="VARCHAR" size="255" />
    <column name="region" type="VARCHAR" size="255" />
    <column name="name" type="VARCHAR" size="255" />
    <column name="surname" type="VARCHAR" size="255" />
    <column name="street" type="VARCHAR" size="255" />
    <column name="house" type="VARCHAR" size="255" />
    <column name="flat" type="VARCHAR" size="255" />
    <column name="code" type="VARCHAR" size="255" />
    <column name="town" type="VARCHAR" size="255" />
    <column name="phone" type="VARCHAR" size="255" />
    <column name="company" type="VARCHAR" size="255" />
    <column name="vat_number" type="VARCHAR" size="255" />
    <column name="pesel" type="VARCHAR" size="255" />
    <column name="crypt" type="BOOLEAN" default="0" />
  </table>

  <table name="st_order_user_data_delivery" phpName="OrderUserDataDelivery">
    <column name="created_at" type="timestamp" />
    <column name="updated_at" type="timestamp" />
    <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" />
    <column name="countries_id" type="INTEGER" />
    <foreign-key foreignTable="st_countries" onDelete="setnull">
      <reference local="countries_id" foreign="id" />
    </foreign-key>
    <column name="country" type="VARCHAR" size="255" />
    <column name="full_name" type="VARCHAR" size="255" />
    <column name="address" type="VARCHAR" size="255" />
    <column name="address_more" type="VARCHAR" size="255" />
    <column name="region" type="VARCHAR" size="255" />
    <column name="name" type="VARCHAR" size="255" />
    <column name="surname" type="VARCHAR" size="255" />
    <column name="street" type="VARCHAR" size="255" />
    <column name="house" type="VARCHAR" size="255" />
    <column name="flat" type="VARCHAR" size="255" />
    <column name="code" type="VARCHAR" size="255" />
    <column name="town" type="VARCHAR" size="255" />
    <column name="phone" type="VARCHAR" size="255" />
    <column name="company" type="VARCHAR" size="255" />
    <column name="vat_number" type="VARCHAR" size="255" />
    <column name="pesel" type="VARCHAR" size="255" />
    <column name="crypt" type="BOOLEAN" default="0" />
  </table>

  <table name="st_order_delivery" phpName="OrderDelivery">
    <column name="created_at" type="timestamp" />
    <column name="updated_at" type="timestamp" />
    <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" />
    <column name="tax_id" type="INTEGER" />
    <foreign-key foreignTable="st_tax" onDelete="setnull">
      <reference local="tax_id" foreign="id" />
    </foreign-key>
    <column name="delivery_id" type="INTEGER" />
    <foreign-key foreignTable="st_delivery" onDelete="setnull">
      <reference local="delivery_id" foreign="id" />
    </foreign-key>
    <column name="name" type="VARCHAR" size="255" />
    <column name="cost" type="DECIMAL" size="10" scale="2" />
    <column name="payment_cost" type="DECIMAL" size="10" scale="2" />
    <column name="opt_tax" type="DECIMAL" size="5" scale="2" />
    <column name="number" type="VARCHAR" size="128" />
    <column name="cost_brutto" type="DECIMAL" size="10" scale="2" />
    <column name="payment_cost_brutto" type="DECIMAL" size="10" scale="2" />
    <column name="custom_cost_brutto" type="DECIMAL" size="10" scale="2" />
    <column name="delivery_date" type="TIMESTAMP" />
    <column name="pickup_point" type="VARCHAR" size="64" />
    <column name="opt_allegro_delivery_method_id" type="CHAR" size="36" />
    <column name="opt_allegro_delivery_smart" type="BOOLEAN" />
    <column name="paczkomaty_number" type="VARCHAR" size="20" />
  </table>

  <table name="st_order_status_coupon_code" phpName="OrderStatusCouponCode">
    <column name="created_at" type="timestamp" />
    <column name="updated_at" type="timestamp" />
    <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" />
    <column name="discount" type="DECIMAL" size="3" scale="1" required="true" default="0" />
    <column name="valid_for" type="INTEGER" required="true" default="0" />
  </table>

  <table name="st_order_status_i18n" phpName="OrderStatusI18n">
    <column name="id" type="integer" required="true" primaryKey="true" />
    <foreign-key foreignTable="st_order_status" onDelete="cascade">
      <reference local="id" foreign="id" />
    </foreign-key>
    <column name="culture" isCulture="true" primaryKey="true" type="VARCHAR" size="7" />
    <column name="name" type="VARCHAR" size="255" />
    <column name="description" type="LONGVARCHAR" />
  </table>

</database>
